const personalities = {
    '@fuckmefi': {
        info: 'Мефи - В комьюнити очень давно, имеет один из самых крупных проектов. Обладает наибольшим феймом среди всех. Основатель проекта "Белый Аист". Провел множество валидаций известных медийных личностей, включая Евгения Вавилонова, Алчность, Тихо и других. Известен своей активной позицией и влиянием в сообществе. Не скрывает свои данные с 2022 года. На данный момент является лицом СНГ комьюнити.',
        channel: 'https://t.me/BelBusel',
        dm: 'https://t.me/fuckmefi',
        category: 'top',
        badge: 'badge-top',
        badgeText: 'ТОП',
        img: 'https://i.imgur.com/GAkhf93.jpg'
    },
    '@chapaevv': {
        info: 'Чапаев - Один из самых медийных личностей в комьюнити, владелец нескольких крупных проектов. Активный участник различных событий и обсуждений. Основатель популярного проекта "Шапито". Провел валидации многих медийных личностей. В редких случаях был замешан в спорных ситуациях, связанных с небольшими суммами денег.',
        channel: 'https://t.me/chapaevv',
        dm: 'https://t.me/chapaevv',
        category: 'top',
        badge: 'badge-top',
        badgeText: 'ТОП',
        img: 'https://i.ytimg.com/vi/HXsM2RidYEk/hq720.jpg?sqp=-oaymwEhCK4FEIIDSFryq4qpAxMIARUAAAAAGAElAADIQj0AgKJD&rs=AOn4CLAEzg68rrZczF1a6i8nbhxDz_SjlA'
    },
    '@waIetov': {
        info: 'Валетов - Согласно независимым рейтингам и telegraph отчетам @waIetov начиная с 2019 года, стабильно занимает позицию лидера в списке лучших сносеров СНГ и Европы. За период с 2019 по 2025 год, деятельность @waIetov привела к прекращению существования значительного числа кланов и различных проектов, что подтверждается его работами.',
        channel: 'https://t.me/chapaevv',
        dm: 'https://t.me/waIetov',
        category: 'top',
        badge: 'badge-top',
        badgeText: 'ТОП',
        img: 'https://i.imgur.com/PeFCNMJ.jpg'
    },
    '@oexec': {
        info: 'Тихо - Известен под ником "Тихо". В комьюнити с 23 года (изначально во ВКонтакте). Основатель проекта "Позорники Телеграма о км". Имеет реರ: https://t.me/oexec Имеет репутацию спокойного и рассудительного участника, несмотря на провокационный характер своего проекта.',
        channel: 'https://t.me/oexec',
        dm: 'https://t.me/oexec',
        category: 'top',
        badge: 'badge-tiktok',
        badgeText: 'TikTok',
        img: 'https://i.imgur.com/rF7MCo9.jpg'
    },
    '@spbmaniac': {
        info: 'Также известен как "Семеркин". Появился в комьюнити ВКонтакте в 2020 году. Создатель проекта "Правда о км". Приобрел популярность благодаря серии интервью с известными медийными личностями. Известен своей активной гражданской позицией и критическим взглядом на происходящее в сообществе.',
        channel: 'https://t.me/spbmaniac',
        dm: 'https://t.me/spbmaniac',
        category: 'top',
        badge: 'badge-top',
        badgeText: 'ТОП',
        img: 'https://i.imgur.com/uAYfujR.jpg'
    },
    '@psyh6': {
        info: 'Один из создателей успешного проекта Asgard пользуется заслуженной репутацией в сообществе. Он известен благодаря активному продвижению и резонансу, который его проект вызвал среди крупных лиц в 2023 году. Отличается доброжелательным отношением к адекватным ребятам. Asgard успешно противостоял таким проектам, как Partisan и Pandemie, и множеству других, не потерпев ни одного поражения. Проект характеризуется адекватным подходом к поиску информации и защите обычных мирных ребят.',
        channel: 'https://t.me/adapteran',
        dm: 'https://t.me/psyh6',
        category: 'top',
        badge: 'badge-top',
        badgeText: 'ТОП',
        img: 'https://i.imgur.com/VImoLhv.jpg'
    },
    '@svater': {
        info: 'Человек появился в комьюнити (в 2021 его выебали на мирняке, после в 2023 он влетел с ноги в ебаное комьюнити). Владелец проекта #снялцепи, считается лучшим в ворке по миллиону. Известен своей резкой манерой общения и нестандартным подходом к ведению дел.',
        channel: 'https://t.me/svater',
        dm: 'https://t.me/svater',
        category: 'top',
        badge: 'badge-top',
        badgeText: 'ТОП',
        img: 'https://i.imgur.com/Q7gPorf.jpg'
    },
    '@killface': {
        info: 'killface появился в комьюнити в 2021 году. Основатель проекта Komaru Dark (Информация X). Стал медийным благодаря масштабным эвакуациям по территории РФ и глубоким знаниям в области OSINT.',
        channel: 'https://t.me/killface',
        dm: 'https://t.me/killface',
        category: 'top',
        badge: 'badge-top',
        badgeText: 'ТОП',
        img: 'https://i.imgur.com/Y5WR9Ex.jpg'
    },
    '@MurderRage': {
        info: 'Кавай / Kawai harmity. Появился в комьюнити в 2023 году, крайне быстро набрал огромную популярность благодаря провокациям и нестандартным методам. Специалист по OSINT и социальной инженерии. Известен своим ярким стилем и пагубным влиянием на сообщество.',
        channel: 'https://t.me/+m5aI0et5sdsyOWIy',
        dm: 'https://t.me/MurderRage',
        category: 'top',
        badge: 'badge-top',
        badgeText: 'ТОП',
        img: 'https://i.imgur.com/NaX9yTA.jpg'
    },
    '@dimulation': {
        info: '@dimulation - лицемерия, появился в комьюнити в телеграмм в 2019-2020 годах, набрал свою популярность за счёт того, что занимался ликвидацией медийных личностей. Осинт специалист и самый добрый человек в км.',
        channel: 'https://t.me/+o4wq08ivPY1hY2Iy',
        dm: 'https://t.me/dimulation',
        category: 'top',
        badge: 'badge-top',
        badgeText: 'ТОП',
        img: 'https://i.imgur.com/dEG7GFR.jpg'
    },
    '@attackskype': {
        info: 'Психо / ᴘsʏʜᴏ Авторитарность Руководитель группировки «Кровавый след». Занимается ликвидированием и разоблачением медийных личностей.',
        channel: 'https://t.me/+VbQxGzvZLqU1OTE0',
        dm: 'https://t.me/attackskype',
        category: 'top',
        badge: 'badge-top',
        badgeText: 'ТОП',
        img: 'https://i.imgur.com/IUHv620.jpg'
    },
    '@Friendlypvp': {
        info: '@Friendlypvp - Dr.Steven, основная медийная личность "Lmao" 21-23 год. Сейчас же владелец N9 REPORT / bomg NEWS и других известных проектов.',
        channel: 'https://t.me/StevenAdapter',
        dm: 'https://t.me/Friendlypvp',
        category: 'top',
        badge: 'badge-top',
        badgeText: 'ТОП',
        img: 'https://i.imgur.com/gGwa3Ei.jpg'
    },
    '@aftter': {
        info: 'Loxssy Имеет очень резкий и грубый характер, готов ебнуть за обычное оскорбление в его сторону. Славится своими поджогами а также пастами на медиек. Владелец крупных проектов связанных с незаконной сферой деятельности.',
        channel: 'https://t.me/LoxssyDoxing',
        dm: 'https://t.me/aftter',
        category: 'top',
        badge: 'badge-top',
        badgeText: 'ТОП',
        img: 'https://i.imgur.com/WmI5xIg.jpg'
    },
    '@KrakenRevenge': {
        info: 'Kraken - пришел в 2021 году, стал известен после 22 года. Занимался изначально сватингом, а после разоблачением и разбором личностей. Администратор "Белый Аист", со-владелец "противкм", со-владелец "шлюхикм".',
        channel: 'https://t.me/BelBusel',
        dm: 'https://t.me/KrakenRevenge',
        category: 'top',
        badge: 'badge-top',
        badgeText: 'ТОП',
        img: 'https://i.imgur.com/kET9Yrw.jpg'
    },
    '@desertAttack': {
        info: 'Kalashnikov, aka Dmitry maniac - пришел в 2017 году, был дизайнером и войсером, стал известен после 21 года. Телеграм комьюнити началось с 21 года, стал изучать другие термины. Потом начал реализовать свои крупнейшие проекты с 22 года, а точнее: Blood cartel, Asgard с Антиповым, Трайбол, Водяной знак. На данный момент проектов на 50к++. Известен мастерством осинт поиска, сетевого трафика.',
        channel: 'https://t.me/overAdapter',
        dm: 'https://t.me/desertAttack',
        category: 'top',
        badge: 'badge-top',
        badgeText: 'ТОП',
        img: 'https://i.imgur.com/2HnLu5a.jpg'
    },
    '@swatnite': {
        info: 'Александр Арбат — участник, сотрудник, а также основатель многих проектов. На данный момент сотрудничает с такими проектами как Deviance, Anonymous Kids, Hayden project, Last breath, Gexogenov project, Community news и так далее. Хобби — навещать, а также разукрашивать двери прочим медийным личностям. Самые популярные работы: валидация на Александра Зайцева, а также доставка фаллоимитатора прямиком на дверь Вавилону.',
        channel: 'https://t.me/arbat_team',
        dm: 'https://t.me/swatnite',
        category: 'top',
        badge: 'badge-top',
        badgeText: 'ТОП',
        img: 'https://i.imgur.com/eJXp7PW.jpg'
    },
    '@usershat': {
        info: 'Шат - в комьюнити с 23 года, имеет один из самых крупных проектов cheers dox, обладает хорошими умениями osint, имеет много работ спортиков, провел много валидаций на медийных личностей.',
        channel: 'https://t.me/cheersdox',
        dm: 'https://t.me/usershat',
        category: 'top',
        badge: 'badge-top',
        badgeText: 'ТОП',
        img: 'https://i.imgur.com/raOOO16.jpg'
    },
    '@fuckdoxa': {
        info: 'Доха — один из известных личностей в комьюнити, активный игрок в различных активностях и дискуссиях. Один из основателей известного проекта “Последний Вздох”. Участвовал в валидации многих медийных личностей.',
        channel: 'https://t.me/qpuud',
        dm: 'https://t.me/fuckdoxa',
        category: 'fame',
        badge: 'badge-FAME',
        badgeText: 'FAME',
        img: 'https://i.imgur.com/fmcGLTr.jpg'
    },
    '@sbulemon': {
        info: 'Появился в комьюнити в 2022 году. Специализируется на OSINT (разведка на основе открытых источников) и программировании. Автор инструмента @lemon_tool, который получил признание в сообществе. Известен техническим подходом к решению задач.',
        channel: 'https://t.me/sbulemon',
        dm: 'https://t.me/sbulemon',
        category: 'fame',
        badge: 'badge-FAME',
        badgeText: 'FAME',
        img: 'https://i.imgur.com/S6Lgvze.jpg'
    },
    '@httpsfilan': {
        info: 'Также известен как "Filan Armadov". Основатель проекта "Show Time". Является уничтожителем многих крупных сайтов благодаря DDoS-атакам, а также активно занимается OSINT и программированием. Появился в комьюнити Telegram в 2020-2021 году, активные действия начал вести в 2023-2024 годах. Начал набирать популярность за счет атак на крупные сайты.',
        channel: 'https://t.me/+xeTcG7qWjglmZWNl',
        dm: 'https://t.me/httpsfilan',
        category: 'fame',
        badge: 'badge-FAME',
        badgeText: 'FAME',
        img: 'https://i.imgur.com/D7I7knH.jpg'
    },
    '@trofingood': {
        info: 'Троффи - в комьюнити тг с 21 года, основатель проекта АНТИ-ДЕЛЕГАЦИЯ, (https://t.me/+njBWuxGp9axiNDhi) проект основывается на вылове людей которые работают по своей же стране.',
        channel: 'https://t.me/+njBWuxGp9axiNDhi',
        dm: 'https://t.me/trofingood',
        category: 'fame',
        badge: 'badge-FAME',
        badgeText: 'FAME',
        img: 'https://i.imgur.com/gAyoE1K.jpg'
    },
    '@d3l3t3dxuser': {
        info: 'Основной никнейм: tizercin. Род занятий: OSINT (разведка по открытым источникам), SOCMINT (анализ социальных сетей), GeoINT (геолокационная разведка), кибербезопасность, анализ данных. Пришел в км в начале 20 года и в этом же году начал свою деятельность.',
        channel: 'https://t.me/d3l3t3dxuser',
        dm: 'https://t.me/d3l3t3dxuser',
        category: 'fame',
        badge: 'badge-FAME',
        badgeText: 'FAME',
        img: 'https://i.imgur.com/QG40nBA.jpg'
    },
    '@levelstorm': {
        info: 'Владелец снесенного проекта, который насчитывал более 20к подписчиков. По его словам, он первый кто валиднул Тихо, но подтверждения его слов нет, также он сливает бомжесофты в канал для ньюгенов.',
        channel: 'https://t.me/GosPanics',
        dm: 'https://t.me/levelstorm',
        category: 'fame',
        badge: 'badge-FAME',
        badgeText: 'FAME',
        img: 'https://i.imgur.com/4pkJLSc.jpg'
    },
    '@vkfool': {
        info: 'Mystery пришел в комьюнити зимой 2023 года. Был заинтересован кодингом, но позже ушел в Osint-разведку. Также помогает Ikea с валидациями личностей и выполняет значительную часть в них. Набрал популярность с помощью программы Mystery Full для поиска данных. Был владельцем канала Mystery Channel с аудиторией 3к подписчиков, но позже его снесли. На данный момент имеет такие проекты как Mystery Channel #2, Mystery Search, AVE GosFords, Rent и является зам. владельцем проекта AVE GosPanics.',
        channel: 'https://t.me/+tCgP-vWk4iUxOWIy',
        dm: 'https://t.me/vkfool',
        category: 'fame',
        badge: 'badge-FAME',
        badgeText: 'FAME',
        img: 'https://i.imgur.com/LGv8cOm.png'
    },
    '@Psyhobrailka': {
        info: 'Дядя Браил - В комьюнити очень давно, имеет один из самых крупных проектов (Hevolos). Обладает наибольшим феймом среди всех. Основатель проекта "Hevolos, Honles". Провел множество валидаций известных медийных личностей. Известен своей активной позицией и влиянием в сообществе. Пришедший в комьюнити с 2022 года проявлял интерес к осинту и сносингу. Всего сносов переходит за отметку 1745+.',
        channel: 'https://t.me/bra9lbi',
        dm: 'https://t.me/Psyhobrailka',
        category: 'fame',
        badge: 'badge-FAME',
        badgeText: 'FAME',
        img: 'https://i.imgur.com/Cpn1wqx.jpg'
    },
    '@xokev': {
        info: 'В комьюнити с 2023 года, имеет одни из самых медийных проектов. Обладает феймом и узнаваемостью, проекты "SURF TEAM" и "ASTRO SNOS". Устранял БОМЖеров и ликвидировал каналы бичей, например "Канал Зайцева". Известен как самый честный и не БОМЖящий человек, который борется со БОМЖом. Ещё не был валидирован. На данный момент пытается пробиться в феймы км.',
        channel: 'https://t.me/MOCHY_BCEX',
        dm: 'https://t.me/xokev',
        category: 'fame',
        badge: 'badge-FAME',
        badgeText: 'FAME',
        img: 'https://i.imgur.com/DfyfguI.jpg'
    },
    '@godrazin': {
        info: 'Пришел в декабре 2023 года. Лучший ворк - лордик, флатков. Основатель «Бомже бинго», владелец «ПРОТИВКМ», со-владелец «Правда о Комьюнити».',
        channel: 'https://t.me/godrazin',
        dm: 'https://t.me/godrazin',
        category: 'fame',
        badge: 'badge-FAME',
        badgeText: 'FAME',
        img: 'https://i.imgur.com/yFt3YWc.jpg'
    },
    '@dragov_world': {
        info: 'Dragov - влился в комьюнити в конце 21 года. Уже на 2 год он считался медийной личностью. Сейчас он считается одним из самых сильных людей в сфере OSINT-разведки. По касте он сватер, osint | ksint. Также сейчас он создает свое приложение по поиску людей, в котором находится более 200к баз по всему миру. Пока что занимает топ-3 по OSINT.',
        channel: 'https://t.me/dragov_project',
        dm: 'https://t.me/dragov_world',
        category: 'fame',
        badge: 'badge-FAME',
        badgeText: 'FAME',
        img: 'https://i.imgur.com/NFJdNeG.jpg'
    },
    '@bogomo10v': {
        info: 'Богомолов, пришел под конец 23 года, был обычным троллем, с лета 24 начал увлекаться Телеграм комьюнити, стал изучать термины и обучаться. Потом в начале 25 года (январе) начал обретать свою популярность благодаря Ефиму Горозову, который позвал в проект "Последний вздох". На него было выложено очень много паст, и за счет этого он поднял свою медийность (известные пасты от Кавая и Дисонова, которые в общей сумме набрали 10к просмотров). Сейчас Богомолов является овнером проекта Impreza.com и администратором в "Последнем вздохе". Известен навыками: осинт, ксинт, деанон.',
        channel: 'https://t.me/PVPD0XBlN',
        dm: 'https://t.me/bogomo10v',
        category: 'fame',
        badge: 'badge-FAME',
        badgeText: 'FAME',
        img: 'https://i.imgur.com/uy0mX4t.jpg'
    },
    '@disonov': {
        info: 'Николай Дисонов узнал о комьюнити в 2021 году, заинтересовался темой и разобрался в ней ближе к 2022 году, когда и пришел в комьюнити. На тот момент состоял в довольно популярном клане с собственным каналом и заказами. После сноса прошлой личности ушел в 2023 году, но вернулся в 2024 с решимостью снова заявить о себе. Добился хорошей медийности благодаря активной позиции и участию в ключевых событиях сообщества.',
        channel: 'https://t.me/+XiCXoGPTIL9kMGZi',
        dm: 'https://t.me/disonov',
        category: 'mid',
        badge: 'badge-FAME',
        badgeText: 'MID',
        img: 'https://i.imgur.com/KZ7UJGr.jpg'
    },
    '@Shiro_Hikari': {
        info: 'Hikari вступил в комьюнити в 2023 году. Основатель проекта O.D.I.N. В 2025 году ушел из комьюнити из-за выгорания, оставив после себя заметный след благодаря своим техническим достижениям и активности.',
        channel: 'https://t.me/ODINosint',
        dm: 'https://t.me/Shiro_Hikari',
        category: 'mid',
        badge: 'badge-FAME',
        badgeText: 'MID',
        img: 'https://i.imgur.com WU7BF0x.jpg'
    },
    '@skrapoov': {
        info: 'Skrapov - Появился в км с 2022 года, используя навыки осинта для пробива. Делал выеб на медийку "Кумоникс". Был/являюсь основателем "Инфо поток", "Skype", "Hellbound". Состою в клане Crime.',
        channel: 'https://t.me/+AFIgAM0sV3NlMTAy',
        dm: 'https://t.me/skrapoov',
        category: 'mid',
        badge: 'badge-FAME',
        badgeText: 'MID',
        img: 'https://i.imgur.com/9czMfVi.jpg'
    },
    '@valcinov': {
        info: '@valcinov в комьюнити с 23 года, основатель проекта "Тень Комьюнити" (@adaptkm). Был под тремя личностями, их раскрывать не буду. Был успешно валидирован в конце 24 года. Активно являюсь осинтером, соц инженером, кодером.',
        channel: 'https://t.me/adaptkm',
        dm: 'https://t.me/valcinov',
        category: 'mid',
        badge: 'badge-FAME',
        badgeText: 'MID',
        img: 'https://i.imgur.com/5M4dEIa.jpg'
    },
    '@swagshits': {
        info: 'В комьюнити около года, имеет фейма (но немного), также состоял и состоит в клане РУВД, знаком с медийными личностями, такими как - Макеев, PsyhoCard, Харат, Plaksa, Chapaevv (состоял в его клане) и т. п. За ним стоит выеб интернет-психолога и снос его тгк (с кланом, который ему передали). На данный момент данный человек под ликом "Алеев", раньше известный под ликами "Молитесь", "ГР3ШНNK" и "Александр Ковалев". Занимается выебами педофилов со своим другом. Проекты не создавал.',
        channel: 'https://t.me/bioAleeva',
        dm: 'https://t.me/swagshits',
        category: 'mid',
        badge: 'badge-FAME',
        badgeText: 'MID',
        img: 'https://i.imgur.com/zs0bQfj.jpg'
    },
    '@crimeneko': {
        info: 'Пришел в комьюнити в 2020 году в ВКонтакте, позже перешёл в Telegram. Владелец проекта @news_satanic. Занимается Osint-разведкой. Известен тем, что валидизировал @disonov и Шаз.',
        channel: 'https://t.me/news_satanic',
        dm: 'https://t.me/crimeneko',
        category: 'mid',
        badge: 'badge-FAME',
        badgeText: 'MID',
        img: 'https://i.imgur.com/DEFAULT_IMAGE.jpg'
    },
    '@codeguru': {
        info: 'В комьюнити с 2021 года. Специализируется на разработке софта для автоматизации задач в Telegram. Автор нескольких популярных ботов, используемых в сообществе.',
        channel: 'https://t.me/codeguru_channel',
        dm: 'https://t.me/codeguru',
        category: 'coder',
        badge: 'badge-coder',
        badgeText: 'CODER',
        img: 'https://i.imgur.com/DEFAULT_CODER_IMAGE.jpg'
    },
    '@scriptkid': {
        info: 'Известен как "Скрипт". Пишет утилиты для OSINT и автоматизации. В комьюнити с 2022 года. Имеет репутацию надежного кодера, хотя иногда его проекты критикуют за баги.',
        channel: 'https://t.me/scriptkid_tools',
        dm: 'https://t.me/scriptkid',
        category: 'coder',
        badge: 'badge-coder',
        badgeText: 'CODER',
        img: 'https://i.imgur.com/DEFAULT_CODER_IMAGE2.jpg'
    },
    '@bomg123': {
        info: 'Типичный БОМЖер. Занимается мелкими скамами и попытками обмана новичков. В комьюнити с 2023 года, но уже успел заработать негативную репутацию.',
        channel: 'https://t.me/bomg123_channel',
        dm: 'https://t.me/bomg123',
        category: 'bomg',
        badge: 'badge-bomg',
        badgeText: 'БОМЖ',
        img: 'https://i.imgur.com/DEFAULT_BOMG_IMAGE.jpg'
    },
    '@scamzoid': {
        info: 'Скамзоид - классический пример скамера. Появился в 2024 году, пытался продавать фейковые базы данных. Был разоблачен и теперь считается изгоем.',
        channel: 'https://t.me/scamzoid_fake',
        dm: 'https://t.me/scamzoid',
        category: 'bomg',
        badge: 'badge-bomg',
        badgeText: 'БОМЖ',
        img: 'https://i.imgur.com/DEFAULT_BOMG_IMAGE2.jpg'
    }
};

function createCard(username, data) {
    const card = document.createElement('div');
    card.classList.add('card');
    
    let emoji;
    switch (data.category) {
        case 'top': emoji = '👑'; break;
        case 'fame': emoji = '🍇'; break;
        case 'mid': emoji = '🌟'; break;
        case 'coder': emoji = '💻'; break;
        case 'bomg': emoji = '💩'; break;
        default: emoji = '❓';
    }

    card.innerHTML = `
        <div class="card-badge ${data.badge}">${data.badgeText}</div>
        <div class="card-img-container">
            <img src="${data.img}" alt="${username}" class="card-img">
        </div>
        <div class="card-content">
            <h3 class="card-title">${username} <span class="card-emoji">${emoji}</span></h3>
            <p class="card-desc">${data.info.substring(0, 100)}...</p>
        </div>
    `;
    card.addEventListener('click', () => openModal(username, data));
    return card;
}

function renderCards(filter = 'all', searchQuery = '') {
    const sections = {
        'top': document.querySelector('#top-grid').parentElement,
        'fame': document.querySelector('#fame-grid').parentElement,
        'mid': document.querySelector('#mid-grid').parentElement,
        'coder': document.querySelector('#coder-grid').parentElement,
        'bomg': document.querySelector('#bomg-grid').parentElement
    };

    const grids = {
        'top': document.getElementById('top-grid'),
        'fame': document.getElementById('fame-grid'),
        'mid': document.getElementById('mid-grid'),
        'coder': document.getElementById('coder-grid'),
        'bomg': document.getElementById('bomg-grid')
    };

    Object.values(grids).forEach(grid => grid.innerHTML = '');
    Object.values(sections).forEach(section => section.style.display = 'none');

    Object.entries(personalities).forEach(([username, data]) => {
        const categoryMatch = filter === 'all' || data.category.toLowerCase() === filter.toLowerCase();
        const searchMatch = username.toLowerCase().includes(searchQuery.toLowerCase()) || 
                           data.info.toLowerCase().includes(searchQuery.toLowerCase());

        if (categoryMatch && searchMatch) {
            const grid = grids[data.category];
            if (grid) {
                grid.appendChild(createCard(username, data));
                sections[data.category].style.display = 'block';
            }
        }
    });
}

function openModal(username, data) {
    const modal = document.getElementById('modal');
    document.getElementById('modal-username').textContent = username;
    document.getElementById('modal-info').textContent = data.info;
    document.getElementById('modal-channel').href = data.channel;
    document.getElementById('modal-dm').href = data.dm;
    const profileUrl = `https://telega-feim.vercel.app/?username=${encodeURIComponent(username)}`;
    document.getElementById('modal-share').href = `https://t.me/share/url?url=${encodeURIComponent(profileUrl)}&text=${encodeURIComponent(`Check out ${username}'s profile on Telega Feim!`)}`;
    modal.classList.add('active');
}

function closeModal() {
    const modal = document.getElementById('modal');
    modal.classList.remove('active');
}

let currentFilter = 'all';
let currentSearchQuery = '';

document.querySelectorAll('.dropdown-item[data-category]').forEach(item => {
    item.addEventListener('click', () => {
        currentFilter = item.getAttribute('data-category');
        currentSearchQuery = document.getElementById('search-input').value;
        renderCards(currentFilter, currentSearchQuery);
    });
});

document.getElementById('search-input').addEventListener('input', (e) => {
    currentSearchQuery = e.target.value;
    renderCards(currentFilter, currentSearchQuery);
});

document.querySelector('.search-btn').addEventListener('click', () => {
    currentSearchQuery = document.getElementById('search-input').value;
    renderCards(currentFilter, currentSearchQuery);
});

function setTheme(theme) {
    document.body.className = theme;
    localStorage.setItem('theme', theme);
    renderCards(currentFilter, currentSearchQuery);
}

document.querySelectorAll('.dropdown-item[onclick^="setTheme"]').forEach(item => {
    item.addEventListener('click', () => {
        const theme = item.getAttribute('onclick').match(/'([^']+)'/)[1];
        setTheme(theme);
    });
});

// Load saved theme or default to 'theme-hacker'
const savedTheme = localStorage.getItem('theme') || 'theme-hacker';
setTheme(savedTheme);

renderCards();
// Check URL for username parameter and filter cards accordingly
const urlParams = new URLSearchParams(window.location.search);
const profileUsername = urlParams.get('username');
if (profileUsername && personalities[profileUsername]) {
    currentFilter = personalities[profileUsername].category; // Фильтр по категории профиля
    currentSearchQuery = profileUsername; // Поиск по имени пользователя
    renderCards(currentFilter, currentSearchQuery);
}